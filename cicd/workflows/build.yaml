---
apiVersion: argoproj.io/v1alpha1
kind: ClusterWorkflowTemplate
metadata:
  name: build-image
spec:
  # serviceAccountName: workflow
  volumes:
  - name: regcred

  templates:
  - name: kaniko-build
    initContainers:
    - name: git-clone
      image: 
    container:
      image: gcr.io/kaniko-project/executor:latest
      args: ["--dockerfile=/workspace/Dockerfile",
              "--context=dir:///workspace",
              "--destination=iurimihai/kaniko-test"]
      volumeMounts:
      - name: regcred
        mountPath: /workspace
