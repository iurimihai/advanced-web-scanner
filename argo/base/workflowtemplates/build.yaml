---
apiVersion: argoproj.io/v1alpha1
kind: ClusterWorkflowTemplate
metadata:
  name: build-cwft
spec:
  # serviceAccountName: workflow
  # volumes:
  # - name: regcred
  # templates:
  # - name: build
  #   initContainers:
  #   - name: git-clone
  #     image: 
  #   container:
  #     image: gcr.io/kaniko-project/executor:latest
  #     # args: ["--dockerfile=/workspace/Dockerfile",
  #     #         "--context=dir:///workspace",
  #     #         "--destination=iurimihai/kaniko-test"]

  #     volumeMounts:
  #     - name: regcred
  #       mountPath: /workspace

  entrypoint: build
  templates:
  - name: build
    inputs:
      parameters:
      - name: phase
        value: default_phase
    script:
      image: docker/whalesay:latest
      command: [cowsay]
      args: ["{{inputs.parameters.phase}}"]
